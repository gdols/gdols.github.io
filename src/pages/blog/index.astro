---
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((p) => p.slug.startsWith("es/") && !p.data.draft)
  .sort((a, b) => b.data.date.localeCompare(a.data.date));
---
<h1>Blog</h1>

{posts.length === 0 ? (
  <p>Sin artículos todavía.</p>
) : (
  <ul>
    {posts.map((p) => (
      <li>
        <a href={`/blog/${p.slug.split("/")[1]}/`}>{p.data.title}</a>
        <small> &mdash; {p.data.date}</small>
        {p.data.summary && <div><small>{p.data.summary}</small></div>}
      </li>
    ))}
  </ul>
)}

